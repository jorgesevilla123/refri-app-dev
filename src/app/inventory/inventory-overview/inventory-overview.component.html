





<h3 style="margin-left: 30px; font-weight: 200">Hay <b>{{count}}</b> productos en el inventario</h3>

<div>
    <button id="add-button" mat-stroked-button (click)="onAdd()">
        AÃ±adir producto <mat-icon id="add-icon">add</mat-icon>
      </button>
</div>











<div *ngIf="isSmallScreen; else bigScreen">

    
    <mat-grid-list cols="1" gutterSize="10px" rowHeight="420px">
        <mat-grid-tile *ngFor="let product of products; index as i; trackBy: trackById">
            <mat-card id="{{product._id}}" class="inventory-products-card">
                <mat-card-header>
                    <mat-card-title class="card-title">
                        {{product.title}}
                    </mat-card-title>
                    <button [matMenuTriggerFor]="menu" style="width: 100%;" mat-icon-button>
          <mat-icon>more_vert</mat-icon>
        </button>
                    <mat-menu #menu="matMenu">
                        <button mat-menu-item (click)="onEdit(product)">Editar <mat-icon class="inventory-edit-button">create
            </mat-icon></button>
                        <button mat-menu-item (click)="onDelete(product)">Eliminar <mat-icon class="inventory-delete-button">delete
            </mat-icon></button>
                        <button mat-menu-item (click)="onEditPhoto(product)">Editar foto<mat-icon class="inventory-edit-img-button">
              add_photo_alternate</mat-icon></button>
                    </mat-menu>
                </mat-card-header>
                <div *ngIf="product.cantidad < 5; else onStock">
                    <mat-card-subtitle style="color: red">
                        Bajo stock
                    </mat-card-subtitle>
                </div>
                <ng-template #onStock>
                    <mat-card-subtitle style="color: #49ce49">
                        En stock
                    </mat-card-subtitle>

                </ng-template>
                <div *ngIf="product.imagePath == 'no-photo'; else image">
                    <img class="product-card-img" mat-card-image src="../../../../assets/no-image.png">
                </div>
                <ng-template #image>
                    <img class="product-card-img" mat-card-image [src]="'http://localhost:4200' + product.imagePath">
                </ng-template>
                <mat-card-content>
                    <h3>Modelo: {{product.modelo}}</h3>
                    <h3>Precio: {{product.precio | currency}}</h3>
                    <h3>Cantidad: {{product.cantidad}}</h3>

                    <h2>Categoria: {{product.categorias}}</h2>


                </mat-card-content>

            </mat-card>

        </mat-grid-tile>

    </mat-grid-list>

</div>




<ng-template #bigScreen>


    

    <mat-grid-list cols="3" gutterSize="10px" rowHeight="420px">
        <mat-grid-tile *ngFor="let product of products">
            <mat-card id="{{product._id}}" class="inventory-products-card">
                <mat-card-header style="width: 100%;">
                    <mat-card-title class="card-title">
                        {{product.title}}
                    </mat-card-title>

                    <button [matMenuTriggerFor]="menu" style="margin-left: 20px;" mat-icon-button>
          <mat-icon style="float: right;">more_vert</mat-icon>
        </button>
                    <mat-menu #menu="matMenu">
                        <button mat-menu-item (click)="onEdit(product)">Editar <mat-icon class="inventory-edit-button">create
            </mat-icon></button>
                        <button mat-menu-item (click)="onDelete(product)">Eliminar <mat-icon class="inventory-delete-button">delete
            </mat-icon></button>
                        <button mat-menu-item (click)="onEditPhoto(product)">Editar foto<mat-icon class="inventory-edit-img-button">
              add_photo_alternate</mat-icon></button>
                    </mat-menu>
                </mat-card-header>
                <div *ngIf="product.cantidad < 5; else onStock">
                    <mat-card-subtitle style="color: red">
                        Bajo stock
                    </mat-card-subtitle>
                </div>
                <ng-template #onStock>
                    <mat-card-subtitle style="color: #49ce49">
                        En stock
                    </mat-card-subtitle>

                </ng-template>
                <div *ngIf="product.imagePath == 'no-photo'; else image">
                    <img class="product-card-img" mat-card-image src="../../../../assets/no-image.png">
                </div>
                <ng-template #image>
                    <img class="product-card-img" mat-card-image [src]="'http://localhost:4200' + product.imagePath">
                </ng-template>
                <mat-card-content>
                    <h3>Modelo: {{product.modelo}}</h3>
                    <h3>Precio: {{product.precio | currency}}</h3>
                    <h3>Cantidad: {{product.cantidad}}</h3>

                    <h2><b>Categoria: {{product.categorias}}</b></h2>


                </mat-card-content>

            </mat-card>

        </mat-grid-tile>

    </mat-grid-list>



    



</ng-template>



<div *ngIf="showProductsPager; else showCategoriesPager">
    <div class="card-footer pb-0 pt-3 mb-4 d-block mx-auto">
        <ul *ngIf="pager.pages && pager.pages.length" class="pagination">
            <li [ngClass]="{disabled:pager.currentPage === 1}" class="page-item first-item">
                <a [routerLink]="['/inventario']" [queryParams]="{ page: 1 }" class="page-link">Primera</a>
            </li>
            <li [ngClass]="{disabled:pager.currentPage === 1}" class="page-item previous-item">
                <a [routerLink]="['/inventario']" [queryParams]=" {page: pager.currentPage - 1 }" class="page-link">
                    <mat-icon>navigate_before</mat-icon>
                </a>
            </li>
            <li *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage === page}" class="page-item number-item">
                <a [routerLink]="['/inventario']" [queryParams]="{ page: page }" class="page-link">{{page}}</a>
            </li>
            <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}" class="page-item next-item">
                <a [routerLink]="['/inventario']" [queryParams]="{page: pager.currentPage + 1 }" class="page-link">
                    <mat-icon>navigate_next</mat-icon>
                </a>
            </li>
            <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}" class="page-item last-item">
                <a [routerLink]="['/inventario']" [queryParams]="{ page: pager.totalPages }" class="page-link">Ultima</a>
            </li>
        </ul>
    </div>
</div>



<ng-template #showCategoriesPager>
    <div class="card-footer pb-0 pt-3 mb-4 d-block mx-auto">
        <ul *ngIf="pager.pages && pager.pages.length" class="pagination">
            <li [ngClass]="{disabled:pager.currentPage === 1}" class="page-item first-item">
                <a [routerLink]="['/inventario/categorias']" [queryParams]="{category: categoryQuery, page: 1 }" class="page-link">Primera</a>
            </li>
            <li [ngClass]="{disabled:pager.currentPage === 1}" class="page-item previous-item">
                <a [routerLink]="['/inventario/categorias']" [queryParams]=" {category: categoryQuery, page: pager.currentPage - 1 }" class="page-link">
                    <mat-icon>navigate_before</mat-icon>
                </a>
            </li>
            <li *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage === page}" class="page-item number-item">
                <a [routerLink]="['/inventario/caegorias']" [queryParams]="{category: categoryQuery, page: page }" class="page-link">{{page}}</a>
            </li>
            <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}" class="page-item next-item">
                <a [routerLink]="['/inventario/categorias']" [queryParams]="{category: categoryQuery, page: pager.currentPage + 1 }" class="page-link">
                    <mat-icon>navigate_next</mat-icon>
                </a>
            </li>
            <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}" class="page-item last-item">
                <a [routerLink]="['/inventario/categorias']" [queryParams]="{category: categoryQuery, page: pager.totalPages }" class="page-link">Ultima</a>
            </li>
        </ul>
    </div>


</ng-template> 