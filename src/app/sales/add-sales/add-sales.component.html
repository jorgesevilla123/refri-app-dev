








<!-- Section for selecting a client before buying  -->





<div *ngIf="!isSelected; else clientSelected" class="customer-selection-section">


  
  <form class="search-client-form" >
    <mat-form-field class="client-mat-form" appearance="outline">
      <mat-label>Buscar cliente</mat-label>
      <input #input  matInput type="search" placeholder="Nombre o cedula" aria-label="State" [matAutocomplete]="auto" [formControl]="stateCtrl">
      <mat-autocomplete #auto="matAutocomplete">
        <mat-option *ngFor="let product of filteredProducts | async" [value]="product.title">
          <img class="autocomplete-img" aria-hidden [src]="product.imagePath" height="25">
          <span>{{product.title}}</span> |
          <small>Modelo: {{product.modelo}}</small>
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
  </form>
  




  <button id="add-button" mat-stroked-button (click)="selectClient()">
    AÃ±adir nuevo cliente <mat-icon id="add-icon">add</mat-icon>
  </button>


  
  <button id="add-button" mat-stroked-button (click)="addValues({position: 1, description: 'producto', model: 'test', quantity: 10, price: 20})">
    test <mat-icon id="add-icon">add</mat-icon>
  </button>


</div>



<ng-template #clientSelected>



  <h2>Client selected</h2>



  <!-- form for searching products and adding it to the table -->


  <form class="search-client-form">
    <mat-form-field class="client-mat-form" appearance="outline">
      <mat-label>Buscar productos</mat-label>
      <input matInput type="search" placeholder="Nombre o cedula" aria-label="State" [matAutocomplete]="auto">
      <mat-icon matSuffix>search</mat-icon>
      <mat-autocomplete #auto="matAutocomplete">
        <mat-option *ngFor="let state of filteredProducts | async" [value]="state.name">
          <img class="autocomplete-img" aria-hidden [src]="state.flag" height="25">
          <span>{{state.name}}</span> |
          <button class="add-product" mat-stroked-button (click)="selectProduct(state)"><mat-icon style="margin-left: auto; margin-right: auto; font-size: 20px; color: dodgerblue;">add</mat-icon></button>
        </mat-option>
      </mat-autocomplete>
    </mat-form-field>
  </form>
  
  <button id="add-button" mat-stroked-button (click)="goBack()">
    Volver a seleccion de cliente <mat-icon id="add-icon">add</mat-icon>
  </button>

  
</ng-template>



















<!-- Table for rendering the products that get selected -->




<table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

    <!--- Note that these columns can be defined in any order.
          The actual rendered columns are set as a property on the row definition" -->
  
    <!-- Position Column -->
    <ng-container matColumnDef="position">
      <th mat-header-cell *matHeaderCellDef class="table-header"> <b>No.</b> </th>
      <td mat-cell *matCellDef="let element"> {{element.position}} </td>
    </ng-container>



  
    <!-- Name Column -->
    <ng-container matColumnDef="description">
      <th mat-header-cell *matHeaderCellDef class="table-header">  <b>Descripcion</b> </th>
      <td mat-cell *matCellDef="let element"> {{element.description}} </td>
    </ng-container>
  
    <!-- Weight Column -->
    <ng-container matColumnDef="model">
      <th mat-header-cell *matHeaderCellDef class="table-header"> <b>Modelo</b> </th>
      <td mat-cell *matCellDef="let element"> {{element.model}} </td>
    </ng-container>
  
    <!-- Symbol Column -->
    <ng-container matColumnDef="quantity">
      <th mat-header-cell *matHeaderCellDef class="table-header"> <b>Cantidad</b> </th>
      <td mat-cell *matCellDef="let element"> {{element.quantity}} </td>
    </ng-container>



    <ng-container matColumnDef="price">
      <th mat-header-cell *matHeaderCellDef class="table-header"> <b>Precio</b> </th>
      <td mat-cell *matCellDef="let element"> {{element.price}} </td>
    </ng-container>



  
    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
  
  